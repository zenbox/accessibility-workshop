<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alt-Attribut Tests im Browser</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }
figure{
  margin-inline:0;
}
    .test-section {
      margin: 30px 0;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 4px;
    }

    .test-images {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .test-images img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 4px;
      border: 2px solid #ddd;
    }

    button {
      background: #0066cc;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
      margin: 10px 10px 10px 0;
    }

    button:hover {
      background: #0052a3;
    }

    #results {
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 4px;
      border-left: 4px solid #0066cc;
    }

    .test-result {
      margin: 15px 0;
      padding: 15px;
      border-radius: 4px;
      border-left: 4px solid;
    }

    .test-result.pass {
      background: #e8f5e9;
      border-left-color: #4caf50;
    }

    .test-result.fail {
      background: #ffebee;
      border-left-color: #f44336;
    }

    .test-result.warning {
      background: #fff3e0;
      border-left-color: #ff9800;
    }

    .test-title {
      font-weight: bold;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .test-details {
      margin-top: 8px;
      font-size: 14px;
      color: #666;
      font-family: monospace;
      white-space: pre-wrap;
    }

    .icon {
      font-size: 20px;
    }

    .summary {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      padding: 20px;
      background: #f5f5f5;
      border-radius: 4px;
    }

    .summary-item {
      flex: 1;
      text-align: center;
      padding: 15px;
      background: white;
      border-radius: 4px;
    }

    .summary-number {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .summary-label {
      color: #666;
      font-size: 14px;
    }
  </style>

</head>

<body>
  <div class="container">
    <h1>üîç Alt-Attribut Accessibility Tests</h1>
    <p>Diese Seite testet die Alt-Attribute von Bildern auf Barrierefreiheit.</p>

    <div>
      <button onclick="runAllTests()">Alle Tests ausf√ºhren</button>
      <button onclick="clearResults()">Ergebnisse l√∂schen</button>
    </div>

    <div class="test-section">
      <h2>Test-Bilder</h2>
      <div class="test-images">
        <!-- Gutes Beispiel -->
        <figure><img src="https://picsum.photos/id/35/200/150" alt="gutes Placeholder-Bild mit Motiv Xy">
          <figcaption>Gutes Bild<br>
          <code>&lt;img src="https://picsum.photos/id/35/200/150" alt="gutes Placeholder-Bild mit Motiv Xy"></code></figcaption>
        </figure>
        
        <!-- Fehlendes alt-Attribut -->
       <figure> <img src="https://picsum.photos/id/34/200/150">
        <figcaption>fehlendes alt-Attribut<br>
          <code>&lt;img src="https://picsum.photos/id/34/200/150"></code></figcaption>
        </figure>

        <!-- Leeres alt (dekorativ) -->
        <figure>
          <img src="https://picsum.photos/id/33/200/150" alt="" role="presentation">
          <figcaption>Dekoratives Bild (kein alt-Text, leeres alt-Attribut)<br>
          <code>&lt;img src="https://picsum.photos/id/33/200/150" alt="" role="presentation"></code></figcaption>
        </figure>

        <!-- Schlechter alt-Text (Dateiname) -->
        <figure><img src="https://picsum.photos/id/72/200/150" alt="image123.jpg">
          <figcaption>Schlechter alt-Text (Dateiname)<br>
          <code>&lt;img src="https://picsum.photos/id/72/200/150" alt="image123.jpg"></code></figcaption>
        </figure>
        
        <!-- Zu langer alt-Text -->
        <figure><img src="https://picsum.photos/id/73/200/150" alt="Dies ist ein sehr langer Alt-Text der weit √ºber 125 Zeichen lang ist und damit nicht mehr den Best Practices entspricht weil er zu ausf√ºhrlich ist und Screenreader-Nutzer unn√∂tig lange besch√§ftigt">
          <figcaption>Zu langer alt-Text (√ºber 125 Zeichen)<br>
          <code>&lt;img src="https://picsum.photos/id/32/200/150" alt="Dies ist ein sehr langer Alt-Text der weit √ºber 125 Zeichen lang ist und damit nicht mehr den Best Practices entspricht weil er zu ausf√ºhrlich ist und Screenreader-Nutzer unn√∂tig lange besch√§ftigt"></code></figcaption>
        </figure>
        
        <!-- Gutes Beispiel 2 -->
       <figure> <img src="https://picsum.photos/id/74/200/150" alt="Sch√∂nes Placeholder-Bild">
        <figcaption>gutes Bild<br>
          <code>&lt;img src="https://picsum.photos/id/74/200/150" alt="Sch√∂nes Placeholder-Bild"></code></figcaption>
        </figure>
      </div>
    </div>

    <div id="results"></div>
  </div>

  <script>
    class AltAttributeTester {
      constructor() {
        this.results = [];
        this.stats = {
          total: 0,
          passed: 0,
          failed: 0,
          warnings: 0
        };
      }

      addResult(title, status, details = '') {
        this.results.push({ title, status, details });
        this.stats.total++;
        if (status === 'pass') this.stats.passed++;
        else if (status === 'fail') this.stats.failed++;
        else if (status === 'warning') this.stats.warnings++;
      }

      testAllImagesHaveAlt() {
        const images = document.querySelectorAll('img');
        const imagesWithoutAlt = [];

        images.forEach((img, index) => {
          if (!img.hasAttribute('alt')) {
            imagesWithoutAlt.push({
              index: index + 1,
              src: img.src
            });
          }
        });

        if (imagesWithoutAlt.length === 0) {
          this.addResult(
            'Alle Bilder haben Alt-Attribute',
            'pass',
            `${images.length} Bilder gepr√ºft`
          );
        } else {
          const details = imagesWithoutAlt.map(img =>
            `Bild ${img.index}: ${img.src}`
          ).join('\n');

          this.addResult(
            'Fehlende Alt-Attribute gefunden',
            'fail',
            `${imagesWithoutAlt.length} von ${images.length} Bildern haben kein alt-Attribut:\n${details}`
          );
        }
      }

      testEmptyAltOnContentImages() {
        const images = document.querySelectorAll('img:not([role="presentation"]):not([aria-hidden="true"])');
        const emptyAlt = [];

        images.forEach((img, index) => {
          const alt = img.getAttribute('alt');
          if (alt !== null && alt.trim() === '' && !img.hasAttribute('role')) {
            emptyAlt.push({
              index: index + 1,
              src: img.src
            });
          }
        });

        if (emptyAlt.length === 0) {
          this.addResult(
            'Keine Content-Bilder mit leerem Alt-Text',
            'pass',
            `${images.length} Content-Bilder gepr√ºft`
          );
        } else {
          const details = emptyAlt.map(img =>
            `Bild ${img.index}: ${img.src}`
          ).join('\n');

          this.addResult(
            'Content-Bilder mit leerem Alt-Text',
            'fail',
            `${emptyAlt.length} Bilder haben leeren Alt-Text:\n${details}`
          );
        }
      }

      testMeaningfulAltText() {
        const images = document.querySelectorAll('img[alt]');
        const badAlt = [];

        images.forEach((img, index) => {
          const alt = img.getAttribute('alt');
          if (!alt) return;

          const issues = [];

          // Pr√ºfe auf Dateiendungen
          if (/\.(jpg|jpeg|png|gif|svg|webp)$/i.test(alt)) {
            issues.push('enth√§lt Dateiendung');
          }

          // Pr√ºfe auf generische Begriffe
          const genericTerms = ['image', 'picture', 'photo', 'bild', 'foto'];
          if (genericTerms.includes(alt.toLowerCase())) {
            issues.push('ist zu generisch');
          }

          if (issues.length > 0) {
            badAlt.push({
              index: index + 1,
              alt: alt,
              issues: issues.join(', ')
            });
          }
        });

        if (badAlt.length === 0) {
          this.addResult(
            'Alt-Texte sind aussagekr√§ftig',
            'pass',
            `${images.length} Bilder gepr√ºft`
          );
        } else {
          const details = badAlt.map(img =>
            `Bild ${img.index}: "${img.alt}" (${img.issues})`
          ).join('\n');

          this.addResult(
            'Problematische Alt-Texte gefunden',
            'warning',
            `${badAlt.length} Bilder mit verbesserungsw√ºrdigem Alt-Text:\n${details}`
          );
        }
      }

      testAltTextLength() {
        const images = document.querySelectorAll('img[alt]');
        const longAlt = [];
        const maxLength = 125;

        images.forEach((img, index) => {
          const alt = img.getAttribute('alt');
          if (alt && alt.length > maxLength) {
            longAlt.push({
              index: index + 1,
              alt: alt,
              length: alt.length
            });
          }
        });

        if (longAlt.length === 0) {
          this.addResult(
            'Alt-Text-L√§ngen sind angemessen',
            'pass',
            `Alle Alt-Texte unter ${maxLength} Zeichen`
          );
        } else {
          const details = longAlt.map(img =>
            `Bild ${img.index}: ${img.length} Zeichen - "${img.alt.substring(0, 50)}..."`
          ).join('\n');

          this.addResult(
            'Zu lange Alt-Texte',
            'warning',
            `${longAlt.length} Alt-Texte √ºber ${maxLength} Zeichen:\n${details}`
          );
        }
      }

      testDecorativeImages() {
        const decorative = document.querySelectorAll('img[role="presentation"], img[aria-hidden="true"]');
        const issues = [];

        decorative.forEach((img, index) => {
          const alt = img.getAttribute('alt');
          if (alt !== '') {
            issues.push({
              index: index + 1,
              alt: alt
            });
          }
        });

        if (issues.length === 0) {
          this.addResult(
            'Dekorative Bilder korrekt markiert',
            'pass',
            `${decorative.length} dekorative Bilder mit leerem alt=""`
          );
        } else {
          const details = issues.map(img =>
            `Bild ${img.index}: hat Alt-Text "${img.alt}" obwohl dekorativ markiert`
          ).join('\n');

          this.addResult(
            'Dekorative Bilder mit Alt-Text',
            'warning',
            details
          );
        }
      }

      displayResults() {
        const resultsDiv = document.getElementById('results');

        const summaryHTML = `
                <div class="summary">
                    <div class="summary-item">
                        <div class="summary-number">${this.stats.total}</div>
                        <div class="summary-label">Tests</div>
                    </div>
                    <div class="summary-item" style="color: #4caf50;">
                        <div class="summary-number">${this.stats.passed}</div>
                        <div class="summary-label">Bestanden</div>
                    </div>
                    <div class="summary-item" style="color: #f44336;">
                        <div class="summary-number">${this.stats.failed}</div>
                        <div class="summary-label">Fehlgeschlagen</div>
                    </div>
                    <div class="summary-item" style="color: #ff9800;">
                        <div class="summary-number">${this.stats.warnings}</div>
                        <div class="summary-label">Warnungen</div>
                    </div>
                </div>
            `;

        const resultsHTML = this.results.map(result => {
          const icon = result.status === 'pass' ? '‚úì' :
            result.status === 'fail' ? '‚úó' : '‚ö†';

          return `
                    <div class="test-result ${result.status}">
                        <div class="test-title">
                            <span class="icon">${icon}</span>
                            ${result.title}
                        </div>
                        ${result.details ? `<div class="test-details">${result.details}</div>` : ''}
                    </div>
                `;
        }).join('');

        resultsDiv.innerHTML = `
                <h2>Test-Ergebnisse</h2>
                ${summaryHTML}
                ${resultsHTML}
            `;
      }

      runAll() {
        this.results = [];
        this.stats = { total: 0, passed: 0, failed: 0, warnings: 0 };

        this.testAllImagesHaveAlt();
        this.testEmptyAltOnContentImages();
        this.testMeaningfulAltText();
        this.testAltTextLength();
        this.testDecorativeImages();

        this.displayResults();
      }
    }

    function runAllTests() {
      const tester = new AltAttributeTester();
      tester.runAll();
    }

    function clearResults() {
      document.getElementById('results').innerHTML = '';
    }

    // Optional: Tests automatisch beim Laden ausf√ºhren
     window.addEventListener('load', runAllTests);
  </script>

</body>

</html>