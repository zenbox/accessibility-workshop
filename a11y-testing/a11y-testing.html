<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axe Accessibility Development Testing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

```
    .test-controls {
        position: fixed;
        top: 10px;
        right: 10px;
        background: #2c3e50;
        color: white;
        padding: 15px;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        min-width: 250px;
    }
    
    .test-controls button {
        background: hsl(210, 50%, 40%);
        color: white;
        border: none;
        padding: 8px 15px;
        margin: 5px 0;
        border-radius: 3px;
        cursor: pointer;
        width: 100%;
    }
    
    .test-controls button:hover {
        background: #2980b9;
    }
    
    .results-panel {
        margin-top: 20px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 5px;
        border-left: 4px solid #17a2b8;
    }
    
    .violation-item {
        background: white;
        margin: 10px 0;
        padding: 15px;
        border-radius: 3px;
        border-left: 4px solid #dc3545;
    }
    
    .violation-item.minor {
        border-left-color: #ffc107;
    }
    
    .violation-item.moderate {
        border-left-color: #fd7e14;
    }
    
    .violation-item.serious {
        border-left-color: #dc3545;
    }
    
    .violation-item.critical {
        border-left-color: #6f42c1;
    }
    
    .violation-header {
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 8px;
    }
    
    .violation-help {
        color: #6c757d;
        font-size: 14px;
        margin-bottom: 10px;
    }
    
    .violation-nodes {
        background: #f1f3f4;
        padding: 10px;
        border-radius: 3px;
        margin-top: 10px;
    }
    
    .node-item {
        margin: 5px 0;
        font-family: monospace;
        font-size: 12px;
        background: white;
        padding: 5px;
        border-radius: 2px;
    }
    
    .status-bar {
        padding: 10px;
        text-align: center;
        font-weight: bold;
        border-radius: 3px;
        margin-bottom: 15px;
    }
    
    .status-bar.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
    
    .status-bar.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }
    
    .highlight-violation {
        outline: 2px solid red !important;
        outline-offset: 2px;
        position: relative;
    }
    
    .highlight-violation::after {
        content: attr(data-violation-info);
        position: absolute;
        top: -30px;
        left: 0;
        background: rgba(220, 53, 69, 0.9);
        color: white;
        padding: 4px 8px;
        border-radius: 3px;
        font-size: 12px;
        white-space: nowrap;
        z-index: 1001;
    }
    
    /* Demo-Content f√ºr Tests */
    .demo-section {
        margin: 30px 0;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    
    .bad-contrast {
        background: #ddd;
        color: #ccc;
        padding: 10px;
    }
    
    .missing-alt img {
        width: 100px;
        height: 100px;
        background: #eee;
    }
    
    /* Problematische Styles f√ºr Demo */
    .very-bad-contrast {
        background: #f0f0f0;
        color: #f5f5f5;
        padding: 10px;
    }
    
    .good-contrast {
        background: #2c3e50;
        color: #ffffff;
        padding: 10px;
    }
    
    .focus-issue {
        outline: none;
    }
    
    .focus-issue:focus {
        outline: none;
    }
    
    .good-focus:focus {
        outline: 2px solid #007acc;
        outline-offset: 2px;
    }
</style>


</head>
<body>
    <!-- Test Control Panel -->
    <div class="test-controls" data-exclude="true">
        <h3 style="margin-top: 0;">üîç Axe Testing</h3>
        <button onclick="runFullTest()">Vollst√§ndiger Test</button>
        <button onclick="runQuickTest()">Schneller Test</button>
        <button onclick="runWCAGTest()">WCAG 2.1 AA Test</button>
        <button onclick="runListOfTests()" style="background: #e67e22;">8 Einzeltests</button>
        <button onclick="clearResults()">Ergebnisse l√∂schen</button>
        <div style="margin-top: 10px; font-size: 12px;">
            <label>
                <input type="checkbox" id="highlightElements" checked>
                Elemente hervorheben
            </label>
        </div>
    </div>

<!-- Demo Content f√ºr Tests -->
<main>
    <h1>Demo-Seite f√ºr Accessibility Tests</h1>

    <div class="demo-section">
        <h2>‚úÖ Gute Beispiele</h2>
        
        <!-- Bilder mit korrektem Alt-Text -->
        <h3>Bilder</h3>
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzOSIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxvZ288L3RleHQ+PC9zdmc+" alt="Firmenlogo - Zur Startseite">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2VlZSIvPjwvc3ZnPg==" alt="" role="presentation">
        
        <!-- Buttons mit korrekten Labels -->
        <h3>Buttons</h3>
        <button type="button" aria-label="Schlie√üen Dialog">√ó</button>
        <button type="button">üîç Suchen</button>
        <button type="button" class="good-focus">Button mit gutem Focus</button>
        
        <!-- Formulare mit Labels -->
        <h3>Formulare</h3>
        <label for="email-input">E-Mail Adresse:</label>
        <input type="email" id="email-input" required>
        
        <label for="name-input">Vollst√§ndiger Name:</label>
        <input type="text" id="name-input" required>
        
        <!-- Guter Kontrast -->
        <h3>Farbkontrast</h3>
        <div class="good-contrast">
            Dieser Text hat ausreichenden Kontrast (7:1)
        </div>
        
        <!-- Korrekte Links -->
        <h3>Links</h3>
        <a href="/about">√úber uns erfahren</a>
        <a href="/contact">Kontakt aufnehmen</a>
        <a href="document.pdf" aria-label="Produktkatalog herunterladen (PDF, 2MB)">üìÑ</a>
        
        <!-- Korrekte Tabelle -->
        <h3>Tabellen</h3>
        <table>
            <caption>Verkaufszahlen 2024</caption>
            <thead>
                <tr>
                    <th>Monat</th>
                    <th>Verk√§ufe</th>
                    <th>Umsatz</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Januar</td>
                    <td>150</td>
                    <td>‚Ç¨15.000</td>
                </tr>
                <tr>
                    <td>Februar</td>
                    <td>200</td>
                    <td>‚Ç¨20.000</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="demo-section">
        <h2>‚ùå Problematische Beispiele</h2>

        <!-- Fehlender Alt-Text -->
        <h3>Bilder ohne Alt-Text</h3>
        <div class="missing-alt">
            <p>Bild ohne Alt-Text:</p>
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2NjYyIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QmlsZDwvdGV4dD48L3N2Zz4=">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzOSIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkljb248L3RleHQ+PC9zdmc+" title="Icon">
        </div>

        <!-- Schlechter Kontrast -->
        <h3>Unzureichender Farbkontrast</h3>
        <div class="bad-contrast">
            Dieser Text hat schlechten Kontrast (1.8:1)
        </div>
        <div class="very-bad-contrast">
            Dieser Text ist kaum lesbar (1.1:1)
        </div>
        <button style="background: #cccccc; color: #dddddd; border: none; padding: 10px;">Schwer lesbarer Button</button>

        <!-- Label-Probleme -->
        <h3>Formular-Probleme</h3>
        <p>Input ohne Label:</p>
        <input type="text" placeholder="Name eingeben">
        
        <p>Input mit falschem Label:</p>
        <label for="wrong-id">E-Mail:</label>
        <input type="email" id="different-id">
        
        <p>Required ohne Hinweis:</p>
        <input type="password" required>

        <!-- Button-Probleme -->
        <h3>Button-Probleme</h3>
        <button onclick="alert('clicked')">‚öôÔ∏è</button>
        <button onclick="window.print()">üñ®Ô∏è</button>
        <div onclick="doSomething()" style="cursor: pointer; padding: 10px; border: 1px solid #ccc;">Klickbares Div</div>
        <button class="focus-issue">Button ohne Focus-Style</button>

        <!-- Heading-Hierarchie Probleme -->
        <h3>Heading-Hierarchie Probleme</h3>
        <h1>Zweite H1 auf der Seite</h1>
        <h5>Diese H5 √ºberspringt H4</h5>
        <div style="font-size: 24px; font-weight: bold;">Pseudo-Heading ohne semantisches Markup</div>

        <!-- Link-Probleme -->
        <h3>Link-Probleme</h3>
        <p>Besuchen Sie unsere Website f√ºr weitere Informationen. <a href="/info">Hier klicken</a></p>
        <p>Laden Sie das Dokument herunter: <a href="/doc.pdf">Download</a></p>
        <a href="/products">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjMzM5Ii8+PC9zdmc+" width="50" height="50">
        </a>
        <a href="javascript:void(0)">JavaScript Link</a>

        <!-- Tabellen-Probleme -->
        <h3>Tabellen-Probleme</h3>
        <table>
            <tr>
                <td>Name</td>
                <td>Alter</td>
                <td>Stadt</td>
            </tr>
            <tr>
                <td>Max</td>
                <td>25</td>
                <td>Berlin</td>
            </tr>
        </table>

        <!-- Listen-Probleme -->
        <h3>Listen-Probleme</h3>
        <div>‚Ä¢ Punkt 1</div>
        <div>‚Ä¢ Punkt 2</div>
        <div>‚Ä¢ Punkt 3</div>

        <!-- ARIA-Probleme -->
        <h3>ARIA-Probleme</h3>
        <div role="button">Div als Button ohne Keyboard-Support</div>
        <input type="text" aria-labelledby="nonexistent-id">
        <div aria-expanded="maybe">Invalid aria-expanded Wert</div>

        <!-- Landmarks-Probleme -->
        <h3>Fehlende Landmarks</h3>
        <div class="header">Pseudo-Header</div>
        <div class="navigation">
            <a href="/">Home</a>
            <a href="/about">About</a>
        </div>
        <div class="sidebar">Sidebar-Inhalt</div>

        <!-- Keyboard-Navigation Probleme -->
        <h3>Keyboard-Navigation Probleme</h3>
        <div tabindex="5">Schlechter Tabindex</div>
        <div tabindex="10">Noch schlechterer Tabindex</div>
        <span onclick="alert('click')" style="cursor: pointer;">Nicht keyboard-zug√§nglich</span>

        <!-- Sprachprobleme -->
        <h3>Sprach-Probleme</h3>
        <p lang="en">This English text should be marked as English</p>
        <p>Texto en espa√±ol sin lang attribute</p>

        <!-- Redundante/√ºberfl√ºssige ARIA -->
        <h3>Redundante ARIA</h3>
        <nav role="navigation"><a href="#">Redundante Navigation</a></nav>
        <button role="button" aria-label="Button">Button mit redundanter Rolle</button>
        <main role="main">Redundante Main-Rolle</main>
    </div>
</main>


<!-- Results Panel -->
<div id="results" class="results-panel" data-exclude="true" style="display: none;">
    <h2>Test-Ergebnisse</h2>
    <div id="status-bar"></div>
    <div id="violations-list"></div>
</div>





<!-- Axe Core laden -->
<script src="https://unpkg.com/axe-core@latest/axe.min.js"></script>

<script>
    // Korrekte Axe Test Funktionen mit funktionierenden Excludes
    async function runFullTest() {
        showLoading();

        try {
            // Teste nur den Main-Bereich, um Test-Controls zu umgehen
            const results = await axe.run('main');
            displayResults(results);
            highlightViolations(results.violations);
        } catch (error) {
            showError('Fehler beim Ausf√ºhren des Tests: ' + error.message);
        }
    }

    async function runQuickTest() {
        showLoading();

        try {
            // Alternative: Teste das gesamte Dokument, aber schlie√üe Test-Bereiche aus
            const results = await axe.run(document, {
                tags: ['wcag2a'],
                exclude: [
                    '[data-exclude="true"]',  // Alle Elemente mit data-exclude
                    '.test-controls',          // Test-Control-Panel
                    '#results'                 // Results-Panel
                ],
                timeout: 5000
            });
            displayResults(results);
            highlightViolations(results.violations);
        } catch (error) {
            showError('Fehler beim Ausf√ºhren des Tests: ' + error.message);
        }
    }

    async function runWCAGTest() {
        showLoading();

        try {
            // Teste nur den relevanten Content-Bereich
            const results = await axe.run('main', {
                tags: ['wcag2a', 'wcag2aa', 'wcag21aa'],
                timeout: 10000
            });
            displayResults(results);
            highlightViolations(results.violations);
        } catch (error) {
            showError('Fehler beim Ausf√ºhren des Tests: ' + error.message);
        }
    }
    
    async function runListOfTests(){}

    function showLoading() {
        const resultsDiv = document.getElementById('results');
        const statusBar = document.getElementById('status-bar');

        resultsDiv.style.display = 'block';
        statusBar.innerHTML = '<div style="text-align: center;">üîÑ Tests werden ausgef√ºhrt...</div>';
        statusBar.className = 'status-bar';
    }

    function displayResults(results) {
        const resultsDiv = document.getElementById('results');
        const statusBar = document.getElementById('status-bar');
        const violationsList = document.getElementById('violations-list');

        resultsDiv.style.display = 'block';

        // Status anzeigen
        const violationCount = results.violations.length;
        if (violationCount === 0) {
            statusBar.className = 'status-bar success';
            statusBar.innerHTML = '‚úÖ Keine Accessibility-Violations gefunden!';
        } else {
            statusBar.className = 'status-bar error';
            statusBar.innerHTML = `‚ùå ${violationCount} Accessibility-Violation(s) gefunden`;
        }

        // Violations auflisten
        violationsList.innerHTML = '';

        if (violationCount > 0) {
            results.violations.forEach(violation => {
                const violationDiv = createViolationElement(violation);
                violationsList.appendChild(violationDiv);
            });
        }

        // Zusammenfassung in der Konsole
        console.group('üîç Axe Accessibility Test Results');
        console.log('Violations:', violationCount);
        console.log('Passes:', results.passes.length);
        console.log('Incomplete:', results.incomplete.length);
        console.log('Inapplicable:', results.inapplicable.length);

        if (violationCount > 0) {
            console.group('Violations Details:');
            results.violations.forEach(v => {
                console.log(`${v.id} (${v.impact}): ${v.nodes.length} nodes affected`);
            });
            console.groupEnd();
        }
        console.groupEnd();
    }

    function createViolationElement(violation) {
        const div = document.createElement('div');
        div.className = `violation-item ${violation.impact}`;

        div.innerHTML = `
            <div class="violation-header">
                ${violation.id} (${violation.impact.toUpperCase()})
            </div>
            <div class="violation-help">
                ${violation.help}
                <a href="${violation.helpUrl}" target="_blank" style="margin-left: 10px;">üìñ Mehr Info</a>
            </div>
            <div class="violation-nodes">
                <strong>Betroffene Elemente (${violation.nodes.length}):</strong>
                ${violation.nodes.map(node => `
                    <div class="node-item">
                        <strong>Selector:</strong> ${node.target.join(', ')}<br>
                        <strong>HTML:</strong> ${escapeHtml(node.html)}<br>
                        <strong>Problem:</strong> ${node.failureSummary}
                    </div>
                `).join('')}
            </div>
        `;

        return div;
    }

    function highlightViolations(violations) {
        // Erst alle alten Highlights entfernen
        clearHighlights();

        if (!document.getElementById('highlightElements').checked) {
            return;
        }

        violations.forEach(violation => {
            violation.nodes.forEach(node => {
                try {
                    const elements = document.querySelectorAll(node.target[0]);
                    elements.forEach(element => {
                        // Nicht die Test-Controls highlighten
                        if (!element.closest('[data-exclude="true"]')) {
                            element.classList.add('highlight-violation');
                            element.setAttribute('data-violation-info',
                                `${violation.id} (${violation.impact})`);
                        }
                    });
                } catch (error) {
                    console.warn('Konnte Element nicht hervorheben:', node.target[0]);
                }
            });
        });
    }

    function clearHighlights() {
        document.querySelectorAll('.highlight-violation').forEach(element => {
            element.classList.remove('highlight-violation');
            element.removeAttribute('data-violation-info');
        });
    }

    function clearResults() {
        document.getElementById('results').style.display = 'none';
        clearHighlights();
    }

    function showError(message) {
        const resultsDiv = document.getElementById('results');
        const statusBar = document.getElementById('status-bar');

        resultsDiv.style.display = 'block';
        statusBar.className = 'status-bar error';
        statusBar.innerHTML = 'üî• ' + message;
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // Dummy-Funktion f√ºr Demo
    function doSomething() {
        alert('Diese Funktion sollte √ºber einen echten Button zug√§nglich sein!');
    }

    // Keyboard Shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch (e.key) {
                case 't':
                    e.preventDefault();
                    runQuickTest();
                    break;
                case 'T':
                    e.preventDefault();
                    runFullTest();
                    break;
                case 'r':
                    e.preventDefault();
                    clearResults();
                    break;
            }
        }
    });

    console.log('üîç Axe Development Testing bereit!');
    console.log('Shortcuts: Ctrl+T (Quick Test), Ctrl+Shift+T (Full Test), Ctrl+R (Clear)');
</script>
```

</body>
</html>