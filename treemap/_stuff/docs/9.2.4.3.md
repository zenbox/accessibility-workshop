# Pr√ºfschritt 9.2.4.3 Schl√ºssige Reihenfolge bei der Tastaturbedienung

Die Reihenfolge, in der Links, Formularelemente und interaktive Objekte mit der Tastatur bedient werden, muss schl√ºssig und nachvollziehbar sein.

-   Die Tabulatorreihenfolge soll der visuellen Anordnung folgen
-   Keine Spr√ºnge oder unerwartete Reihenfolgen bei der Navigation mit der Tabulatortaste
-   Dynamisch eingef√ºgte Inhalte sollen nach dem ausl√∂senden Element im Quellcode erscheinen
-   Modal-Fenster und Dialoge m√ºssen den Fokus erhalten und ihn nach Schlie√üen an das ausl√∂sende Element zur√ºckgeben
-   Keine mehrfach aufeinanderfolgenden unsichtbaren Tab-Ziele

## WCAG

**Erfolgskriterium 2.4.3 ‚Äì Fokus-Reihenfolge (Level A)**

**Wenn eine Webseite sequenziell navigiert werden kann und die Navigationsreihenfolge die Bedeutung oder Bedienung beeinflusst,** erhalten fokussierbare Komponenten den Fokus in einer Reihenfolge, die Bedeutung und Bedienbarkeit aufrechterh√§lt.  

‚∏ª

üí° **Zielsetzung (Understanding)**

Dieses Erfolgskriterium stellt sicher, dass Benutzer, die Webseiten sequentiell navigieren (z.‚ÄØB. mit der Tabulatortaste), Inhalte in einer logischen und vorhersehbaren Reihenfolge durchlaufen k√∂nnen. Eine unlogische Fokusreihenfolge kann zu Verwirrung f√ºhren und die Bedienbarkeit beeintr√§chtigen.  

Besonders profitieren davon: 
- **Benutzer mit motorischen Einschr√§nkungen**, die auf Tastaturnavigation angewiesen sind.
- **Benutzer mit Sehbehinderungen**, die Screenreader oder Vergr√∂√üerungssoftware verwenden.
- **Benutzer mit kognitiven Einschr√§nkungen**, die durch unerwartete Fokus√§nderungen desorientiert werden k√∂nnen.

‚∏ª

üõ†Ô∏è **Umsetzung (‚ÄûHow to Meet‚Äú)**

Um dieses Erfolgskriterium zu erf√ºllen, sollten Entwickler sicherstellen, dass:
- **Die HTML-Struktur** die visuelle und logische Reihenfolge der Inhalte widerspiegelt. 
- **CSS-Positionierungen** nicht die logische Fokusreihenfolge st√∂ren.
- **tabindex-Attribute** mit Bedacht eingesetzt werden, um die nat√ºrliche Tab-Reihenfolge nicht zu beeintr√§chtigen. 
- **Modale Dialoge** beim √ñffnen den Fokus erhalten und beim Schlie√üen den Fokus zum ausl√∂senden Element zur√ºckgeben.
- **Dynamische Inhalte** wie Pop-ups oder Akkordeons in die Fokusreihenfolge integriert werden.

Beispiel f√ºr eine korrekte Fokusreihenfolge in einem Formular:

``<form>``
  `<label `for="name"`>`Name:`</label>`
  `<input `id="name"` `type="text"` />`

  `<label `for="email"`>`E-Mail:`</label>`
  `<input `id="email"` `type="email"` />`

  <`button` `type="submit"`>Absenden`</`button`>`
`</form>`

In diesem Beispiel folgt die Fokusreihenfolge der logischen Abfolge von Name ‚Üí E-Mail ‚Üí Absenden.

‚∏ª

‚úÖ **Vorteile**
- **Verbesserte Bedienbarkeit**: Benutzer k√∂nnen Inhalte effizient und ohne Verwirrung navigieren.
- **Erh√∂hte Zug√§nglichkeit**: Besonders hilfreich f√ºr Benutzer, die auf Tastaturnavigation oder assistive Technologien angewiesen sind.
- **Bessere Benutzererfahrung**: Eine logische Fokusreihenfolge `tr`√§gt zu einer konsistenten und vorhersehbaren Interaktion bei. 


## BITV Pr√ºfverfahren

### Was wird gepr√ºft?

Wenn die Webseite mit der Tastatur bedient wird, soll die Reihenfolge, in der Links, Formularelemente und Objekte angesteuert werden, schl√ºssig und nachvollziehbar sein.

### Warum wird das gepr√ºft?

Die Bedienung soll ger√§teunabh√§ngig m√∂glich sein. Das bedeutet: Sie muss sowohl mit einem Zeiger (Maus, Touch-Geste) als auch mit der Tastatur m√∂glich sein. Auch andere Eingabeformen, etwa die Spracheingabe oder Schaltersteuerung, sind auf eine gute Tastaturbedienbarkeit und eine sinnvolle Fokusreihenfolge angewiesen.

Probleme gibt es meistens mit der Tastaturbedienung, denn die Mehrzahl der Webnutzenden arbeitet mit der Maus, daher wird oft nur an sie gedacht. Auf die Tastaturbedienbarkeit angewiesen sind zum Beispiel viele motorisch eingeschr√§nkte Menschen oder Blinde.

Bei einer nicht nachvollziehbaren Fokusreihenfolge laufen Nutzende Gefahr, die Orientierung zu verlieren, die Tastaturbedienbarkeit kann dadurch erheblich beeintr√§chtigt sein.

Manche Seiten pr√§sentieren mittels JavaScript dynamische Inhalte. R√ºckmeldungen bei fehlerhaften Formular-Eingaben werden beispielsweise dynamisch unter dem Feld angezeigt oder Dialoge werden eingeblendet. W√§hrend diese √Ñnderungen der Seite f√ºr sehende Nutzende unmittelbar wahrnehmbar sind, werden sie von Screenreader-Nutzenden gar nicht oder erst mit Verz√∂gerung wahrgenommen.

Werden weitere Elemente √ºber DOM-Scripting in den Quellcode einer Seite dynamisch eingef√ºgt (d.h. ohne dass die Seite neu l√§dt), soll diese Einf√ºgung **unterhalb** des ausl√∂senden Elements geschehen, damit Screenreader hinzugef√ºgte Elemente bemerken und vorlesen.

Werden Elemente an anderer Stelle im DOM eingef√ºgt, etwa am Seitenende (das ist oft bei Modalen Dialogen der Fall), m√ºssen Scripte f√ºr ein sinnvolles Fokusmanagement sorgen und damit eine sinnvolle Fokusreihenfolge gew√§hrleisten.

### Wie wird gepr√ºft?

### 1\. Anwendbarkeit des Pr√ºfschritts

Der Pr√ºfschritt ist anwendbar, wenn die Seite Links, Formularelemente oder Objekte (z. B. Men√ºs oder Dialoge, die nach Interaktion eingeblendet werden) enth√§lt.

### 2\. Pr√ºfung

1.  Seite im Firefox Browser laden.
2.  Mit der Tabulatortaste die Links, Formularelemente und Objekte durchgehen und pr√ºfen, ob die Reihenfolge im Wesentlichen nachvollziehbar ist.
3.  Seite in Chrome aufrufen und die Pr√ºfung wiederholen.

#### 2.1 Pr√ºfung von dynamisch eingef√ºgten Inhalten

Wenn Inhalte dynamisch generiert werden (also Interaktionen auf der Seite Inhalte hinzuf√ºgen, die nicht schon in der Ansicht ohne CSS auf der frisch geladenen Seite sichtbar sind):

1.  Seite im [Firefox](https://www.bitvtest.de/bitv_test/das_testverfahren_im_detail/werkzeugliste.html#firefox) aufrufen.
2.  Voreinstellung im Firefox: Im Browser-Men√º _Einstellungen_ w√§hlen. Dort im Bereich "Surfen" die Option "Markieren von Text mit der Tastatur zulassen" ausw√§hlen. Hierdurch wird die Cursor-Position als blinkende Einf√ºgemarke angezeigt. Dies entspricht in der Regel dem Screenreader-Fokus.
3.  Dynamisch eingef√ºgte Inhalte aufrufen, etwa durch Formulareingabe oder Ausl√∂sen einer Schaltfl√§che.
4.  Browsereigenes Entwicklerwerkzeug (_Inspektor_ f√ºr Firefox) aufrufen, das Element-Symbol (das Icon zeigt den Cursor auf einer Taste) links in der Men√ºleiste ausw√§hlen und den eingef√ºgten Inhalt anklicken. Im eingeblendeten Fenster l√§sst sich nun der generierte Quellcode im Zusammenhang einsehen.
5.  Position des eingef√ºgten Elements pr√ºfen.

    -   Fall 1: Erscheint der eingef√ºgte Inhalt im Quellcode **unterhalb** des ausl√∂senden Elements (Siehe dazu die Erl√§uterung in Abschnitt [3\. Hinweise](#_3_hinweise)).
    -   Fall 2: Wenn generierte Pseudo-Fenster (Modalen Dialogen) im Quellcode nicht direkt nach dem ausl√∂senden Element, sondern **an anderer Stelle**, etwa ganz am Seitenende, eingef√ºgt werden:

6.  Pseudo-Fenster schlie√üen und vom ausl√∂senden Element aus erneut mit der Tastatur aufrufen.
7.  Erkennen auch Screenreader-Nutzer, dass ein neuer Inhalt hinzugef√ºgt wurde? Das kann auf verschiedene Weise geschehen, z. B.:

    -   Der Fokus wird √ºber ein Skript zum Beginn des eingef√ºgten Elements verschoben (die blinkende Einf√ºgemarke ist an dessen Beginn sichtbar)
    -   Der Link-/Button-Text oder eine Eigenschaft des ausl√∂senden Elements (etwa `disabled`) wird ge√§ndert **und** beim Weiter-Tabben erh√§lt das hinzugef√ºgte Element den n√§chsten Fokus

8.  Wird der Fokus auf das ausl√∂sende Element zur√ºckverschoben, wenn das Pseudo-Fenster geschlossen wird?

### 3\. Hinweise

-   Die Tabulatorreihenfolge sollte im Wesentlichen der visuellen Anordnung auf dem Bildschirm folgen. Kleinere Abweichungen sind kein Problem, manchmal ist es ja auch gar nicht m√∂glich, aus der Anordnung auf dem Bildschirm eine Reihenfolge zwingend abzuleiten.
-   Die Tabulatorreihenfolge ist schwer nachzuvollziehen, wenn sie √ºber unsichtbare ausf√ºhrbare Elemente geht. Das betrifft insbesondere aufeinander folgende nicht sichtbare Sprunglinks.
-   Wenn die Tabulatorreihenfolge nicht gut erkennbar ist, weil z. B. die Fokushervorhebung unterdr√ºckt wird, ist das Bookmarklet [Show Tab Focus](https://codepen.io/jeffsmith/details/beb) von Jeff Smith ein hilfreiches Werkzeug zum hervorheben der aktuellen Position.
-   Die Pr√ºfung erfolgt bei **eingeschaltetem** JavaScript.
-   Der Pr√ºfer muss mit der Funktionsweise der eingesetzten Browser vertraut sein, er muss wissen, welche Tasten und Tastenkombinationen f√ºr die Tastaturbedienung vorgesehen sind.

    Wichtig in diesem Zusammenhang: **Die Felder von Formularen k√∂nnen ggf. trotz korrekter Auszeichnung unter Umst√§nden nicht mit der Tabulatortaste durchwandert werden. Wenn das Browserfenster nicht den Fokus hat, darf man nicht einfach hineinklicken und dann erst mit der Tastaturbedienung anfangen. Der Fokus muss vielmehr per Tastatur (F6) zum Browserfenster bewegt werden.** Auswahllisten ohne Submit-Button, die auf `onchange` reagieren, k√∂nnen ggf. mit den Pfeiltasten allein nicht bedient werden, da immer schon die erste Listenoption ausgel√∂st wird. Um solche Auswahllisten durchzubl√§ttern, muss man sie ggf. zun√§chst mit der Tastenkombination "ALT + Pfeil nach unten" √∂ffnen. Dann kann man mit den Pfeiltasten nach oben und unten durch die Optionen bl√§ttern und mit der Eingabetaste eine Option ausw√§hlen.

-   Die [ARIA Authoring Practices Guide (APG)](https://www.w3.org/WAI/ARIA/apg/) bieten eine Orientierung, welche Fokusreihenfolge / welches Fokusmanagement bei bestimmten Widget-Typen zu erwarten ist.

#### Zur Einf√ºgung dynamisch generierter Inhalte unterhalb des ausl√∂senden Elements

In manchen F√§llen kann es angemessen sein, Inhalte nicht unmittelbar nach dem ausl√∂senden Element, sondern weiter unten auf der Seite dynamisch einzuf√ºgen bzw. zu aktualisieren. Ein Beispiel ist die dynamische Ergebnisanzeige unterhalb eines mehrstufigen Suchformulars. Hier ist zu pr√ºfen, ob das dynamische Verhalten des Formulars schon aus dem Kontext der Eingabefelder bzw. Auswahllisten heraus bzw. durch erl√§uternde Texte oder Hilfefunktionen deutlich wird.

### 4\. Bewertung

#### Erf√ºllt

-   Die Reihenfolge, in der Links, Formularelemente und Objekte mit der Tabulatortaste angesteuert werden, ist im Wesentlichen nachvollziehbar und schl√ºssig.

#### Nicht voll erf√ºllt

-   Die Tabulatorreihenfolge ist nicht schl√ºssig, sie weicht ohne nachvollziehbaren Grund von der visuellen Anordnung ab oder der Tastaturfokus durchl√§uft mehr als drei aufeinanderfolgende, nicht-sichtbare Stationen.
-   Pseudofenster, die au√üerhalb der normalen Quellcodereihenfolge, also etwa am Seitenende, eingef√ºgt werden, erhalten nicht unmittelbar oder beim n√§chsten Tabben den Fokus.
-   Beim Schlie√üen von Pseudofenstern wird der Fokus nicht auf das ausl√∂sende Element zur√ºckgesetzt.

#### Nicht erf√ºllt

-   Die Reihenfolge, in der Links, Formularelemente und Objekte mit der Tabulatortaste angesteuert werden, ist nicht nachvollziehbar und erschwert die Bedienung mit der Tastatur erheblich.

## Quellen

-   Knowbility: [Let‚Äôs Focus on Slide-Out Navigation](https://knowbility.org/blog/2020/accessible-slide-menus) (March 2020)

### Einordnung des Pr√ºfschritts

### Abgrenzung zu anderen Pr√ºfschritten

-   In diesem Pr√ºfschritt wird die **Tabreihenfolge** gepr√ºft, egal, ob diese der Anordnung fokussierbarer Elemente im Quellcode entspricht oder √ºber `tabindex` und Skripte erzeugt wird.
-   Die grunds√§tzliche **Erreichbarkeit** und **Ausl√∂sbarkeit** von interaktiven Elementen ist Gegenstand von Pr√ºfschritt 9.2.1.1 "Ohne Maus nutzbar".
-   Die **Sichtbarkeit** des Fokus ist Gegenstand von Pr√ºfschritt 9.2.4.7 "Aktuelle Position des Fokus deutlich".
