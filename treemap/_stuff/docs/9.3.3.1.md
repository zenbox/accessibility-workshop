# Pr√ºfschritt 9.3.3.1 Fehlererkennung

Fehler in Formularen m√ºssen klar benannt und die fehlerhaften Felder identifiziert werden.

-   Fehlerhafte oder unvollst√§ndige Eingaben sollen durch Textmeldungen verst√§ndlich erkl√§rt werden
-   Betroffene Felder m√ºssen eindeutig hervorgehoben oder mit passenden Labels erg√§nzt sein
-   Fehlermeldungen k√∂nnen am Seitenanfang, direkt neben den Feldern oder per ARIA (`aria-describedby`, `role="alert"`) bereitgestellt werden
-   Nach Korrektur und erneutem Abschicken sollen fr√ºhere Fehlermeldungen verschwinden
-   Unzureichend: Nur grafische Hervorhebung ohne Text oder das L√∂schen aller Eingaben nach einem Fehler

## WCAG

**Erfolgskriterium 3.3.1 ‚Äì Fehleridentifikation (Level A)**

**Wenn ein Eingabefehler automatisch erkannt wird, wird das fehlerhafte Element identifiziert und der Fehler dem Benutzer in Textform beschrieben.** 

Dies bedeutet, dass bei der automatischen Erkennung eines Eingabefehlers das betreffende Feld klar gekennzeichnet und der Fehler in Textform erl√§utert werden muss. Dies ist besonders wichtig f√ºr Benutzer, die auf assistive Technologien angewiesen sind oder Schwierigkeiten mit visuellen Hinweisen haben.

‚∏ª

üí° **Zielsetzung (Understanding)**

Dieses Erfolgskriterium soll sicherstellen, dass Benutzer erkennen k√∂nnen, wenn ein Fehler aufgetreten ist, und verstehen, was falsch ist. Ein ‚ÄúEingabefehler‚Äù ist eine vom Benutzer bereitgestellte Information, die nicht akzeptiert wird. Dies umfasst: 
- Pflichtfelder, die leer gelassen wurden
- Eingaben, die nicht dem erforderlichen Format entsprechen 
- Werte au√üerhalb des erlaubten Bereichs

Beispiel: Wenn ein Benutzer ein Geburtsdatum eingibt, das zwei Jahre in der Zukunft liegt, sollte das System diesen Fehler erkennen, das betreffende Feld hervorheben und eine Textmeldung wie ‚ÄúBitte geben Sie ein g√ºltiges Geburtsdatum ein‚Äù anzeigen.  

‚∏ª

üõ†Ô∏è **Umsetzung (‚ÄûHow to Meet‚Äú)**

Um dieses Erfolgskriterium zu erf√ºllen, sollten Entwickler sicherstellen, dass:
- **Fehlerhafte Felder klar identifiziert** werden, z.‚ÄØB. durch visuelle Hervorhebung und entsprechende ARIA-Attribute.
- **Fehlermeldungen in Textform** bereitgestellt werden, die den Fehler beschreiben und idealerweise Hinweise zur Korrektur geben.
- **Fehlermeldungen programmatisch zug√§nglich** sind, damit assistive Technologien sie erkennen und dem Benutzer mitteilen k√∂nnen.

**Beispiel:**

Ein Formularfeld f√ºr die Telefonnummer akzeptiert nur Zahlen. Wenn ein Benutzer Buchstaben eingibt, sollte das Feld markiert und eine Textmeldung wie ‚ÄúBitte geben Sie nur Zahlen ein‚Äù angezeigt werden.  

‚∏ª

‚úÖ **Vorteile**
- **Verbesserte Zug√§nglichkeit**: Benutzer mit Sehbehinderungen oder kognitiven Einschr√§nkungen k√∂nnen Fehler leichter erkennen und verstehen.
- **Erh√∂hte Benutzerfreundlichkeit**: Klare Fehlermeldungen helfen allen Benutzern, Eingabefehler schnell zu korrigieren.
- **Unterst√ºtzung f√ºr assistive Technologien**: Screenreader und andere Hilfsmittel k√∂nnen die Fehlermeldungen erkennen und dem Benutzer mitteilen.


## BITV Pr√ºfverfahren

### Was wird gepr√ºft?

Wenn ein Formular Fehlermeldungen erzeugt, sollen die fehlerhaft ausgef√ºllten Felder identifiziert und der Fehler in Textform beschrieben werden.

### Warum wird das gepr√ºft?

Bei Formulareingaben kommt es √∂fters zu Fehlern: Nutzer verschreiben sich oder √ºberspringen ben√∂tigte Eingaben.

Wenn das Angebot Nutzereingaben √ºberpr√ºft, sollen die Felder mit fehlerhaften oder fehlenden Eingaben identifiziert werden. Dies erleichtert den Nutzern, Eingaben zu korrigieren.

### Wie wird gepr√ºft?

### 1\. Anwendbarkeit des Pr√ºfschritts

Der Pr√ºfschritt ist anwendbar, wenn die Seite Formulare enth√§lt, welche bei inkorrektem Ausf√ºllen Fehlermeldungen erzeugen. Dies kann schon w√§hrend der Eingabe oder erst nach dem Abschicken des Formulars geschehen.

### 2\. Pr√ºfung

1.  Formular unvollst√§ndig oder fehlerhaft ausf√ºllen, etwa durch das Leerlassen von Pflichtfeldern oder das Eingeben syntaktisch nicht korrekter E-Mail-Adressen.
2.  Falls das Abschicken des Formulars eine Fehlermeldung erzeugt: Pr√ºfen, ob die betroffenen Felder identifiziert werden und der Fehler mit Hilfe von Text beschrieben wird. Die Identifizierung der betroffenen Felder kann, auch abh√§ngig von der L√§nge des Formulars, auf verschiedene Arten geschehen:

    -   Bei Neuanzeige des Formulars werden am Seitenbeginn fehlerhaft ausgef√ºllte Felder identifiziert.
    -   Fehlerhaft ausgef√ºllte Felder werden zus√§tzlich deutlich hervorgehoben.
    -   Die Labeltexte fehlerhaft ausgef√ºllter Felder √§ndern sich, um auf die Fehler darstellungsunabh√§ngig hinzuweisen.
    -   Fehlermeldungen, die nahe am Formularfeld positioniert sind, aber nicht Teil des Labels sind, sind programmatisch ermittelbar, etwa durch die Verkn√ºpfung mittels `aria-labelledby` oder `aria-describedby`.
    -   Fehlermeldungen werden mit Hilfe von Live-Regionen oder Benachrichtigungen (`alertdialog`) bereitgestellt.

3.  Pr√ºfen, ob nach Korrektur der Eingaben und erneutem Abschicken des Formulars zuvor angezeigte Fehlermeldungen verschwinden.

### 3\. Hinweise

-   Wenn serverseitig eine Fehlermeldung auf neuer Seite ausgegeben wird, wird diese wie ein Seitenzustand unter der Ausgangsseite mitgepr√ºft. Gepr√ºft wird auch die Erf√ºllung anderer relevanter Pr√ºfkriterien.
-   Wenn Formulare keine Fehlermeldungen erzeugen, ist dies nicht negativ zu bewerten.
-   Die Verkn√ºpfung von Fehlermeldungen mit `aria-errormessage` (siehe [WAI-ARIA 1.1 Spec](https://www.w3.org/TR/wai-aria-1.1/#`aria-errormessage`)) ist bislang noch nicht ausreichend von Browsern unterst√ºtzt, um Fehlermeldungen ausreichend zug√§nglich f√ºr Screenreader-Nutzende zu verkn√ºpfen.

### 4\. Bewertung

#### Nicht voll erf√ºllt

-   Die Fehlermeldung nach Formular√ºberpr√ºfung benennt Felder mit fehlender oder fehlerhafter Eingabe nicht klar oder verweist nicht deutlich darauf (etwa durch √Ñnderung des dem Feld zugeordneten Labels, semantische Hervorhebung, oder Links).
-   Unspezifische Fehlermeldung, Felder mit Eingabefehlern oder fehlenden Eingaben werden lediglich grafisch hervorgehoben.

#### Nicht erf√ºllt

-   Die Fehlermeldung gibt keinen Aufschluss dar√ºber, welche Eingabe den Fehler erzeugt hat.
-   Bei fehlerhafter Eingabe wird das Formular neu angezeigt. Bereits gemachte korrekte Eingaben sind gel√∂scht, die Felder sind wieder leer und m√ºssen erneut ausgef√ºllt werden. Ausnahme: Das L√∂schen bereits gemachter Eingaben ist sinnvoll bei sicherheitsrelevanten Daten wie Passw√∂rtern oder Benutzernamen.

### Einordnung des Pr√ºfschritts

### Abgrenzung von anderen Pr√ºfschritten

Ob infolge von Fehleingaben generierte oder eingeblendete Fehlermeldungen an der richtigen Stelle im Quelltext stehen, ist Gegenstand des Pr√ºfschritts 9.1.3.2 "Sinnvolle Reihenfolge".

#### Einordnung des Pr√ºfschritts nach WCAG 2.1

#### Guideline

-   [Guideline 3.3 Input Assistance: Help users avoid and correct mistakes.](https://www.w3.org/TR/WCAG21/#input-assistance)

#### Success criteria

-   [3.3.1 Error Identification](https://www.w3.org/TR/WCAG21/#error-identification) (Level A)

#### Techniques

##### General Techniques

-   [G83: Providing text descriptions to identify required fields that were not completed](https://www.w3.org/WAI/WCAG21/Techniques/general/G83.html)
-   [G84: Providing `a` text description when the user provides information that is not in the list of allowed values](https://www.w3.org/WAI/WCAG21/Techniques/general/G84.html)
-   [G85: Providing `a` text description when user input falls outside the required format or values](https://www.w3.org/WAI/WCAG21/Techniques/general/G85.html)

##### Scripting Techniques

-   [SCR18: Providing client-side validation and alert](https://www.w3.org/WAI/WCAG21/Techniques/client-side-script/SCR18.html)
-   [SCR32: Providing client-side validation and adding error text via the DOM](https://www.w3.org/WAI/WCAG21/Techniques/client-side-script/SCR32.html)

##### ARIATechniques

-   [ARIA18: Using `aria-alertdialog` to Identify Errors](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA18)
-   [ARIA19: Using ARIA role=alert or Live Regions to Identify Errors](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA19)
-   [ARIA21: Using Aria-Invalid to Indicate An Error Field](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA21)

## Quellen

### DOM Scripting und WAI ARIA zur Erzeugung von Fehlermeldungen w√§hrend der Formular-Eingabe

-   Marco‚Äôs accessibility blog: [Easy ARIA tip #3: `aria-invalid` and `role` "alert"](http://www.marcozehe.de/2008/07/16/easy-aria-tip-3-aria-invalid-and-role-alert/) (Juli 2008, englischer Text)

### Fragen zu diesem Pr√ºfschritt

### Warum wird nicht grunds√§tzlich bei allen Formularen eine Fehler√ºberpr√ºfung verlangt?

Eine Fehlerbehandlung ist oft sinnvoll, aber nicht grunds√§tzlich bei allen Formularen. Das h√§ngt ab vom Zweck des Formulars und der Art des Angebots. So kann es unter Umst√§nden sinnvoll sein, grunds√§tzlich alle Eingaben, auch solche mit Fehlern, zu verwerten.

Wenn jedoch irgendwelche Fehlermeldungen generiert werden, m√ºssen diese brauchbar sein. Das wird in diesem Pr√ºfschritt √ºberpr√ºft.
