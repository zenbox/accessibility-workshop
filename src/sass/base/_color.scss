// Colors
// CSS Variable
:root {
    // Form factor
    --bright: hsla(0, 0%, 100%, 1);
    --on-bright: hsla(0, 0%, 15%, 1);

    --medium-bright: rgb(237, 237, 237);
    --on-medium-bright: hsla(0, 0%, 15%, 1);

    --medium: rgb(175, 175, 175);
    --on-medium: hsla(0, 0%, 15%, 1);

    --dark: hsla(0, 0%, 15%, 1);
    --on-dark: hsla(0, 0%, 85%, 1);

    --shadow-light: hsla(0, 0%, 0%, 0.1);
    --shadow: hsla(0, 0%, 0%, 0.25);
    --shadow-heavy: hsla(0, 0%, 0%, 0.5);

    --dark-high-contrast: hsla(0, 0%, 0%, 1);
    --on-dark-hight-contrast: hsla(0, 0%, 100%, 1);

    // Identity
    --primary: hsl(221, 81%, 61%);
    --on-primary: rgb(250, 204, 250);
    --secondary: hsla(120, 94%, 33%, 1);
    --on-secondary: rgb(200, 250, 200);
    --tertiary: hsla(174, 90%, 37%, 1);
    --on-tertiary: rgb(2, 47, 43);
    --accred: hsl(360, 84%, 64%);
    --on-accred: var(--bright);
    --neutral: hsla(0, 0%, 50%, 1);
    --on-neutral: hsla(0, 0%, 85%, 1);

    // Semantic
    --error: hsla(0, 100%, 50%, 1);
    --on-error: rgb(251, 202, 202);
    --warning: hsla(50, 100%, 50%, 1);
    --on-warning: hsl(50, 98%, 23%);
    --info: hsla(210, 100%, 50%, 1);
    --on-info: rgb(164, 208, 251);
    --success: hsla(110, 100%, 50%, 1);
    --on-success: rgb(21, 124, 1);

    // State or element
    --disabled: var(--neutral);
    --on-disabled: var(--on-neutral);

    --link-color: blue;
    --link-hover: red;
    --link-visited: purple;
    --link-active: green;

    --code: hsla(210, 100%, 30%, 1);
    --on-code: var(--bright);

    --sample: hsla(210, 100%, 50%, 0.2);
    --sample-dark: hsla(30, 100%, 50%, 0.4);
    --on-sample: var(--dark);

    --border-color: hsl(0, 1%, 47%);
    --outline-color: hsla(210, 100%, 50%, 0.8);
    --focus-ring: 0 0 0 2px var(--outline-color);

    // ===== Transition und Animation =====
    --transition-speed: 0.2s;
    --transition-speed-slow: 0.5s;
    --animation-scale: 1;

    // ===== Media-Handling =====
    --media-data-usage: 100%;
    --media-transparency: 1;
}

$colors: (
    bright: var(--bright),
    on-bright: var(--on-bright),
    dark: var(--dark),
    on-dark: var(--on-dark),
    primary: var(--primary),
    on-primary: var(--on-primary),
    secondary: var(--secondary),
    on-secondary: var(--on-secondary),
    tertiary: var(--tertiary),
    on-tertiary: var(--on-tertiary),
    accred: var(--accred),
    on-accred: var(--on-accred),
    neutral: var(--neutral),
    on-neutral: var(--on-neutral),
    error: var(--error),
    on-error: var(--on-error),
    success: var(--success),
    on-success: var(--on-success),
    info: var(--info),
    on-info: var(--on-info),
    warning: var(--warning),
    on-warning: var(--on-warning),
    disabled: var(--disabled),
    on-disabled: var(--on-disabled),
    shadow: var(--shadow),
    link-color: var(--link-color),
    link-visited: var(--link-visited),
    link-hover: var(--link-hover),
    link-active: var(--link-active),
);

@each $key, $value in $colors {
    .bg-#{$key} {
        background-color: $value;
    }
    .text-#{$key} {
        color: $value;
    }
}

:root,
:root.light {
    --default: 1rem;
    --big: 2rem;
    --small: 0.75rem;
}

:root.dark {
    background-color: var(--dark);
    color: var(--on-dark);
}

:root.high-contrast {
    background-color: var(--dark-high-contrast);
    color: var(--on-dark-hight-contrast);
}

$lightens: (
    100: 100%,
    110: 110%,
    120: 120%,
    130: 130%,
    140: 140%,
    150: 150%,
    160: 160%,
    170: 170%,
    180: 180%,
    190: 190%,
    200: 200%,
    210: 210%,
    220: 220%,
    230: 230%,
    240: 240%,
    250: 250%,
    260: 260%,
    270: 270%,
    280: 280%,
    290: 290%,
    300: 300%,
    310: 310%,
    320: 320%,
    330: 330%,
    340: 340%,
    350: 350%,
    360: 360%,
    370: 370%,
    380: 380%,
    390: 390%,
    400: 400%,
);

@each $key, $value in $lightens {
    .lighten-#{$key} {
        filter: brightness($value);
    }
}

.lighter {
    opacity: 50%;
    background: white;
}
.darker {
    filter: brightness(75%);
}

/* - - - - - - - - - - */

// Präferenz-Variablen
// Erweiterte CSS-Variablen für verschiedene Darstellungspräferenzen

// ===== Dark Mode =====
html.dark-mode {
    --background: hsla(0, 0%, 12%, 1);
    --surface: hsla(0, 0%, 18%, 1);
    --text-primary: hsla(0, 0%, 95%, 1);
    --text-secondary: hsla(0, 0%, 75%, 1);
    --border-color: hsla(0, 0%, 40%, 1);

    --primary-light: hsla(300, 70%, 40%, 1);
    --primary: hsla(300, 70%, 30%, 1);
    --primary-dark: hsla(300, 70%, 20%, 1);
    --on-primary: rgb(250, 204, 250);

    --secondary-light: hsla(120, 60%, 50%, 1);
    --secondary: hsla(120, 60%, 40%, 1);
    --secondary-dark: hsla(120, 60%, 30%, 1);
    --on-secondary: rgb(200, 250, 200);

    --tertiary-light: hsla(174, 70%, 50%, 1);
    --tertiary: hsla(174, 70%, 40%, 1);
    --tertiary-dark: hsla(174, 70%, 30%, 1);
    --on-tertiary: rgb(2, 47, 43);

    --shadow-light: hsla(0, 0%, 0%, 0.2);
    --shadow: hsla(0, 0%, 0%, 0.4);
    --shadow-heavy: hsla(0, 0%, 0%, 0.7);

    --outline-color: hsla(210, 100%, 70%, 0.8);

    --link-color: hsla(210, 100%, 70%, 1);
    --link-visited: hsla(270, 70%, 60%, 1);
    --link-hover: hsla(0, 100%, 70%, 1);
    --link-active: hsla(120, 100%, 50%, 1);
}

// ===== High Contrast Mode =====
html.high-contrast-mode {
    --background: #000000;
    --surface: #000000;
    --text-primary: #ffffff;
    --text-secondary: #ffffff;
    --border-color: #ffffff;

    --primary: #ffffff;
    --primary-light: #ffffff;
    --primary-dark: #ffffff;
    --on-primary: #000000;

    --secondary: #ffffff;
    --secondary-light: #ffffff;
    --secondary-dark: #ffffff;
    --on-secondary: #000000;

    --tertiary: #ffffff;
    --tertiary-light: #ffffff;
    --tertiary-dark: #ffffff;
    --on-tertiary: #000000;

    --accent: #ffffff;
    --on-accent: #000000;

    --error: #ffffff;
    --on-error: #000000;
    --warning: #ffffff;
    --on-warning: #000000;
    --info: #ffffff;
    --on-info: #000000;
    --success: #ffffff;
    --on-success: #000000;

    --outline-color: #ffffff;
    --focus-ring: 0 0 0 3px #ffffff, 0 0 0 5px #000000;

    --link-color: #ffff00;
    --link-visited: #ffff00;
    --link-hover: #ffff00;
    --link-active: #ffff00;
}

// ===== Inverted Colors Mode =====
html.inverted-colors-mode {
    filter: invert(100%) hue-rotate(180deg);

    // Bilder zurück-invertieren, damit sie normal aussehen
    img,
    video,
    canvas {
        filter: invert(100%) hue-rotate(180deg);
    }
}

// ===== Reduced Motion =====
html.reduced-motion {
    --transition-speed: 0.001s; // Fast keine Transition
    --transition-speed-slow: 0.001s;
    --animation-scale: 0;

    *,
    *::before,
    *::after {
        animation-duration: 0.001s !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001s !important;
        scroll-behavior: auto !important;
    }
}

// ===== Reduced Data =====
html.reduced-data {
    --media-data-usage: 10%; // Drastisch reduzieren

    img,
    video {
        filter: blur(1px) brightness(0.9);
        max-width: 50vw;
        max-height: 50vh;
    }
}

// ===== Reduced Transparency =====
html.reduced-transparency {
    --media-transparency: 0;

    *,
    *::before,
    *::after {
        opacity: 1 !important;
        backdrop-filter: none !important;
    }

    // Undurchsichtige Hintergründe für Elemente mit Transparenz
    [class*="transparent"],
    [class*="opacity"],
    [style*="opacity"],
    [style*="rgba"] {
        background-color: var(--surface) !important;
        box-shadow: none !important;
    }
}

// ===== Forced Colors (für Windows High Contrast Mode) =====
html.forced-colors {
    forced-color-adjust: none; /* Explizit die System-Farben verwenden */

    --background: Canvas;
    --text-primary: CanvasText;
    --border-color: CanvasText;

    --primary: Highlight;
    --on-primary: HighlightText;

    --link-color: LinkText;
    --link-visited: VisitedText;

    --outline-color: Focus;
    --focus-ring: 0 0 0 2px Focus;

    // Bei Forced Colors nutzen wir die System-Farben
    button,
    input,
    select,
    textarea {
        border-color: ButtonText;
        color: ButtonText;
        background-color: ButtonFace;
    }

    a:link {
        color: LinkText;
    }

    a:visited {
        color: VisitedText;
    }

    :focus {
        outline: 2px solid Focus;
    }
}

// Utility-Klassen für die Hintergrundfarben und Textfarben
.bg-primary {
    background-color: var(--primary);
    color: var(--on-primary);
}
.bg-secondary {
    background-color: var(--secondary);
    color: var(--on-secondary);
}
.bg-tertiary {
    background-color: var(--tertiary);
    color: var(--on-tertiary);
}
.bg-accent {
    background-color: var(--accent);
    color: var(--on-accent);
}
.bg-surface {
    background-color: var(--surface);
    color: var(--text-primary);
}
.bg-error {
    background-color: var(--error);
    color: var(--on-error);
}
.bg-warning {
    background-color: var(--warning);
    color: var(--on-warning);
}
.bg-info {
    background-color: var(--info);
    color: var(--on-info);
}
.bg-success {
    background-color: var(--success);
    color: var(--on-success);
}

.text-primary {
    color: var(--text-primary);
}
.text-secondary {
    color: var(--text-secondary);
}
.text-primary-color {
    color: var(--primary);
}
.text-secondary-color {
    color: var(--secondary);
}
.text-tertiary {
    color: var(--tertiary);
}
.text-accent {
    color: var(--accent);
}
.text-error {
    color: var(--error);
}
.text-warning {
    color: var(--warning);
}
.text-info {
    color: var(--info);
}
.text-success {
    color: var(--success);
}
